<div class="container-fluid" class="my-3">
  <h2>Réservations en cours</h2>
  <table mdbTable bordered="true">
    <thead>
    <tr>
      <th *ngFor="let head of headElements" scope="col">{{head}} </th>
    </tr>
    </thead>
    <tbody>
    <tr mdbTableCol *ngFor="let resa of resas">
      <th scope="row">{{resa?.annonce.dateTime | date:'dd/MM/yyyy hh:mm:ss'}}</th>
      <td>{{resa.annonce.itineraire.adresseDepart}}</td>
      <td>{{resa.annonce.itineraire.adresseDest}}</td>
      <td>{{resa.statutResa}}</td>
      <td>
        <button type="button" mdbBtn color="primary" class="relative waves-light" (click)="basicModal.show()" mdbWavesEffect>details</button>
        <button type="button" class="btn btn-danger" (click)="openModal(content)">Annuler</button>

        <ng-template #content let-modal>
          <div class="modal-header">
            <button type="button" class="close pull-right" aria-label="Close" (click)="modal.dismiss()">
              <span aria-hidden="true">×</span>
            </button>
            <h4 class="modal-title w-100" id="myModalLabel">Etes-vous sur de vouloir annuler votre covoiturage?</h4>
          </div>
          <div class="modal-body">
            <dl class="row">
              <dt class="col-4">Départ</dt>
              <dd class="col-8">{{resa?.annonce.itineraire.adresseDepart }}</dd>

              <dt class="col-4">Destination</dt>
              <dd class="col-8">{{resa?.annonce.itineraire.adresseDest}}</dd>

              <dt class="col-4">Date/heure</dt>
              <dd class="col-8">{{resa?.annonce.dateTime | date:'dd/MM/yyyy hh:mm:ss'}}</dd>

              <dt class="col-4">Véhicule</dt>
              <dd class="col-8">{{resa?.annonce.vehicule.marque+" "+resa?.annonce.vehicule.modele}}</dd>

              <dt class="col-4">Chauffeur</dt>
              <dd class="col-8">{{resa?.annonce.collegue.nomComplet}}</dd>

              <div class="alert alert-danger" role="alert">
                Affichage message d'erreur
              </div>
            </dl>
          </div>
          <div class="modal-footer">
            <button type="button" mdbBtn color="secondary" class="waves-light" aria-label="Close" (click)="modal.dismiss()" mdbWavesEffect>Annuler</button>
            <button type="button" mdbBtn color="secondary" class="waves-light" aria-label="Close" mdbWavesEffect>Confirmer</button>
          </div>
    </ng-template>

        <div mdbModal #basicModal="mdbModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myBasicModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close pull-right" aria-label="Close" (click)="basicModal.hide()">
                  <span aria-hidden="true">×</span>
                </button>
                <h4 class="modal-title w-100" id="myModalLabel">Détails du covoiturage</h4>
              </div>
              <div class="modal-body">
                <dl class="row">
                  <dt class="col-4">Départ</dt>
                  <dd class="col-8">{{resa?.annonce.itineraire.adresseDepart }}</dd>

                  <dt class="col-4">Destination</dt>
                  <dd class="col-8">{{resa?.annonce.itineraire.adresseDest}}</dd>

                  <dt class="col-4">Date/heure</dt>
                  <dd class="col-8">{{resa?.annonce.dateTime | date:'dd/MM/yyyy hh:mm:ss'}}</dd>

                  <dt class="col-4">Véhicule</dt>
                  <dd class="col-8">{{resa?.annonce.vehicule.marque+" "+resa?.annonce.vehicule.modele}}</dd>

                  <dt class="col-4">Chauffeur</dt>
                  <dd class="col-8">{{resa?.annonce.collegue.nomComplet}}</dd>
                </dl>
              </div>
              <div class="modal-footer">
                <button type="button" mdbBtn color="secondary" class="waves-light" aria-label="Close" (click)="basicModal.hide()" mdbWavesEffect>Close</button>
              </div>
            </div>
          </div>
        </div>
      </td>
    </tr>
    </tbody>
  </table>
</div>

<div class="container" *ngIf="resasHisto.length > 0">
  <h2>Historique</h2>
  <table class="table table-striped">
    <thead>
    <tr>
      <th *ngFor="let head of headElementsHisto" scope="col">{{head}} </th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let resa of resasHisto">
      <th scope="row">{{resa?.annonce.dateTime | date:'dd/MM/yyyy hh:mm:ss'}}</th>
      <td>{{resa?.annonce.itineraire.adresseDepart}}</td>
      <td>{{resa?.annonce.itineraire.adresseDest}}</td>
      <td>{{resa?.statutResa}}</td>
      <td>
        <button type="button" mdbBtn color="primary" class="relative waves-light" (click)="basicModal.show()" mdbWavesEffect>details</button>

        <div mdbModal #basicModal="mdbModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myBasicModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close pull-right" aria-label="Close" (click)="basicModal.hide()">
                  <span aria-hidden="true">×</span>
                </button>
                <h4 class="modal-title w-100" id="myModalLabel">Détails du covoiturage</h4>
              </div>
              <div class="modal-body">
                <dl class="row">
                  <dt class="col-4">Départ</dt>
                  <dd class="col-8">{{resa?.annonce.itineraire.adresseDepart }}</dd>

                  <dt class="col-4">Destination</dt>
                  <dd class="col-8">{{resa?.annonce.itineraire.adresseDest}}</dd>

                  <dt class="col-4">Date/heure</dt>
                  <dd class="col-8">{{resa?.annonce.dateTime | date:'dd/MM/yyyy hh:mm:ss'}}</dd>

                  <dt class="col-4">Véhicule</dt>
                  <dd class="col-8">{{resa?.annonce.vehicule.marque+" "+resa?.annonce.vehicule.modele}}</dd>

                  <dt class="col-4">Chauffeur</dt>
                  <dd class="col-8">{{resa?.annonce.collegue.nomComplet}}</dd>
                </dl>
              </div>
              <div class="modal-footer">
                <button type="button" mdbBtn color="secondary" class="waves-light" aria-label="Close" (click)="basicModal.hide()" mdbWavesEffect>Close</button>
              </div>
            </div>
          </div>
        </div>
      </td>
    </tr>
    </tbody>
  </table>

  <div class="d-flex justify-content-between p-2">
    <ngb-pagination [collectionSize]="collectionSize" [(page)]="page" [pageSize]="pageSize">
    </ngb-pagination>

    <select class="custom-select" style="width: auto" [(ngModel)]="pageSize">
      <option [ngValue]="2">2 items per page</option>
      <option [ngValue]="5">5 items per page</option>
    </select>
  </div>
</div>
